{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-16">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">Custom Packaging Quote Calculator</h1>
        
        <div class="bg-white rounded-lg shadow-lg p-6">
            <form id="quoteForm" class="space-y-6" method="POST">
                <!-- Package Type -->
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">Package Type</label>
                    <select name="package_type" class="w-full rounded-md border-gray-300" required>
                        <option value="">Select Package Type</option>
                        <option value="export_crate">ISPM 15 Export Crate</option>
                        <option value="cushioned_crate">Cushioned Crate</option>
                        <option value="skidmate">Export Skidmate</option>
                        <option value="cushion_skid">Cushion Skid with Ramp</option>
                        <option value="oversize">Oversize Crate</option>
                    </select>
                </div>

                <!-- Dimensions -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Length (inches)</label>
                        <input type="number" name="length" min="1" step="0.1" class="w-full rounded-md border-gray-300" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Width (inches)</label>
                        <input type="number" name="width" min="1" step="0.1" class="w-full rounded-md border-gray-300" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Height (inches)</label>
                        <input type="number" name="height" min="1" step="0.1" class="w-full rounded-md border-gray-300" required>
                    </div>
                </div>

                <!-- Weight -->
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">Approximate Weight (lbs)</label>
                    <input type="number" name="weight" min="1" class="w-full rounded-md border-gray-300" required>
                </div>

                <!-- Special Requirements -->
                <div class="space-y-4">
                    <label class="block text-sm font-medium text-gray-600">Special Requirements</label>
                    <div class="space-y-2">
                        <label class="inline-flex items-center">
                            <input type="checkbox" name="requirements[]" value="moisture_barrier" class="rounded border-gray-300 text-wood-brown">
                            <span class="ml-2">Moisture Barrier</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="checkbox" name="requirements[]" value="shock_absorption" class="rounded border-gray-300 text-wood-brown">
                            <span class="ml-2">Shock Absorption</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="checkbox" name="requirements[]" value="custom_foam" class="rounded border-gray-300 text-wood-brown">
                            <span class="ml-2">Custom Foam Inserts</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="checkbox" name="requirements[]" value="ramp_system" class="rounded border-gray-300 text-wood-brown">
                            <span class="ml-2">Ramp System</span>
                        </label>
                    </div>
                </div>

                <!-- Shipping Details -->
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">Shipping Destination</label>
                    <select name="shipping_type" class="w-full rounded-md border-gray-300" required>
                        <option value="domestic">Domestic</option>
                        <option value="international">International</option>
                    </select>
                </div>

                <button type="submit" class="w-full btn-wood py-2 px-4 rounded-md">Calculate Quote</button>
            </form>

            <!-- Quote Result -->
            {% if estimated_quote %}
            <div class="mt-8 p-6 border-t border-gray-200">
                <h3 class="text-xl font-semibold mb-4">Estimated Quote Range</h3>
                <div class="bg-wood-accent bg-opacity-10 rounded-lg p-4">
                    <p class="text-2xl font-bold text-wood-dark">${{ estimated_quote.min }} - ${{ estimated_quote.max }}</p>
                    <p class="text-sm text-gray-600 mt-2">This is a rough estimate. Contact us for a detailed quote.</p>
                    <div class="mt-4">
                        <a href="{{ url_for('contact') }}" class="inline-block btn-wood py-2 px-4 rounded-md">Request Detailed Quote</a>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
document.getElementById('quoteForm').addEventListener('submit', function(e) {
    const length = parseFloat(this.elements.length.value);
    const width = parseFloat(this.elements.width.value);
    const height = parseFloat(this.elements.height.value);
    const weight = parseFloat(this.elements.weight.value);
    
    if (length * width * height > 1000000) {
        e.preventDefault();
        alert('For very large packages, please contact us directly for a custom quote.');
    }
    
    if (weight > 50000) {
        e.preventDefault();
        alert('For items over 50,000 lbs, please contact us directly for a custom quote.');
    }
});
</script>
{% endblock %}
